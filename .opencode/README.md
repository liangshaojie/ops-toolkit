# OpenCode è‡ªå®šä¹‰å‘½ä»¤

ops-toolkit é¡¹ç›®çš„ OpenCode è‡ªå®šä¹‰å‘½ä»¤é…ç½®ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚

## ğŸ“ å‘½ä»¤æ–‡ä»¶ä½ç½®

å‘½ä»¤æ–‡ä»¶ä½äº: `.opencode/command/`

## ğŸš€ å¯ç”¨å‘½ä»¤

### `/add-cmd <command-name>`

æ·»åŠ æ–°çš„ CLI å‘½ä»¤ã€‚

**ç”¨æ³•**:

```
/add-cmd monitor
```

**åŠŸèƒ½**:

- åœ¨ `src/commands/` åˆ›å»ºå‘½ä»¤æ–‡ä»¶
- åœ¨ `src/index.ts` æ³¨å†Œå‘½ä»¤
- åŒ…å«å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- æ·»åŠ é”™è¯¯å¤„ç†å’Œå½©è‰²è¾“å‡º

**ç¤ºä¾‹**:

```
/add-cmd backup
```

---

### `/fix <issue-description>`

ä¿®å¤ä»£ç é—®é¢˜å¹¶è¿è¡Œæ£€æŸ¥ã€‚

**ç”¨æ³•**:

```
/fix monitor command not showing correct output
```

**åŠŸèƒ½**:

- åˆ†æé—®é¢˜å¹¶æä¾›è§£å†³æ–¹æ¡ˆ
- ç¡®ä¿ TypeScript ä¸¥æ ¼æ¨¡å¼
- åŒ…å«é€‚å½“çš„é”™è¯¯å¤„ç†
- è¿è¡Œç±»å‹æ£€æŸ¥å’Œ lint
- è¿è¡Œæµ‹è¯•éªŒè¯ä¿®å¤

**ç¤ºä¾‹**:

```
/fix TypeError: Cannot read property 'x' of undefined
```

---

### `/test`

è¿è¡Œæµ‹è¯•å¥—ä»¶å¹¶åˆ†æç»“æœã€‚

**ç”¨æ³•**:

```
/test
```

**åŠŸèƒ½**:

- è¿è¡Œæ‰€æœ‰æµ‹è¯•
- è¯†åˆ«å¤±è´¥çš„æµ‹è¯•
- åˆ†æå¤±è´¥åŸå› 
- å»ºè®®ä¿®å¤æ–¹æ¡ˆ
- æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡
- æ¨èé¢å¤–çš„æµ‹è¯•ç”¨ä¾‹

**ç¤ºä¾‹**:

```
/test
```

---

### `/release`

å‡†å¤‡é¡¹ç›®å‘å¸ƒã€‚

**ç”¨æ³•**:

```
/release
```

**åŠŸèƒ½**:

- æ£€æŸ¥æµ‹è¯•æ˜¯å¦é€šè¿‡
- è¿è¡Œç±»å‹æ£€æŸ¥
- è¿è¡Œ lint ä¿®å¤
- æŸ¥çœ‹æœ€è¿‘çš„æäº¤
- å»ºè®®ç‰ˆæœ¬å·å˜æ›´ç±»å‹
- å»ºè®®æäº¤ä¿¡æ¯æ ¼å¼

**ç¤ºä¾‹**:

```
/release
```

---

### `/review <location>`

å®¡æŸ¥ä»£ç æ›´æ”¹ã€‚

**ç”¨æ³•**:

```
/review src/commands/monitor/index.ts
```

**åŠŸèƒ½**:

- ä»£ç è´¨é‡æ£€æŸ¥
- æ€§èƒ½åˆ†æ
- å®‰å…¨å®¡æŸ¥
- ä»£ç é£æ ¼æ£€æŸ¥
- æµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥

**å®¡æŸ¥æ¸…å•**:

1. âœ… TypeScript æœ€ä½³å®è·µ
2. âœ… æ²¡æœ‰ä½¿ç”¨ `any` ç±»å‹
3. âœ… è‰¯å¥½çš„é”™è¯¯å¤„ç†
4. âœ… æ€§èƒ½ä¼˜åŒ–
5. âœ… å®‰å…¨æ€§æ£€æŸ¥
6. âœ… éµå¾ª ESLint è§„åˆ™

**ç¤ºä¾‹**:

```
/review src/utils/logger.ts
```

---

### `/build`

æ„å»ºå¹¶éªŒè¯é¡¹ç›®ã€‚

**ç”¨æ³•**:

```
/build
```

**åŠŸèƒ½**:

- è¿è¡Œç±»å‹æ£€æŸ¥
- è¿è¡Œ lint
- æ‰§è¡Œæ„å»º
- è¿è¡Œæµ‹è¯•
- æŠ¥å‘Šæ‰€æœ‰é—®é¢˜

**æ£€æŸ¥é¡ºåº**:

1. Type Check â†’ Lint â†’ Build â†’ Test

**ç¤ºä¾‹**:

```
/build
```

---

### `/add-pkg <package-name>`

æ·»åŠ æ–°çš„ä¾èµ–åŒ…ã€‚

**ç”¨æ³•**:

```
/add-pkg axios
```

**åŠŸèƒ½**:

- ç¡®å®šæ˜¯è¿è¡Œæ—¶è¿˜æ˜¯å¼€å‘ä¾èµ–
- ä½¿ç”¨ `bun add` å®‰è£…
- æ›´æ–°å¯¼å…¥è¯­å¥
- æ·»åŠ ç±»å‹å®šä¹‰ï¼ˆå¦‚æœéœ€è¦ï¼‰
- éªŒè¯å…¼å®¹æ€§

**ç¤ºä¾‹**:

```
/add-pkg dotenv
```

---

### `/debug <issue-description>`

è·å–è°ƒè¯•å¸®åŠ©ã€‚

**ç”¨æ³•**:

```
/debug async function not awaiting promise
```

**åŠŸèƒ½**:

- åˆ†æé”™è¯¯
- å®šä½é”™è¯¯ä½ç½®
- æ£€æŸ¥å †æ ˆè·Ÿè¸ª
- å»ºè®®è°ƒè¯•æ­¥éª¤
- æä¾›ä¿®å¤æ–¹æ¡ˆ
- éªŒè¯ä¿®å¤

**ç¤ºä¾‹**:

```
/debug process.exit(1) not exiting program
```

---

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### ç»„åˆä½¿ç”¨å‘½ä»¤

**æ·»åŠ æ–°åŠŸèƒ½**:

```
1. /add-cmd my-command
2. /review src/commands/my-command
3. /test
4. /release
```

**ä¿®å¤ Bug**:

```
1. /fix error message
2. /review src/fixed-file.ts
3. /test
4. /build
```

**ä»£ç å®¡æŸ¥**:

```
1. /review src/changed-files/
2. /test
3. /build
4. /release
```

### å‚æ•°ä½¿ç”¨

å¤§å¤šæ•°å‘½ä»¤æ”¯æŒå‚æ•°ï¼š

```
/add-cmd backup      # æ·»åŠ  backup å‘½ä»¤
/fix monitor bug    # ä¿®å¤ monitor å‘½ä»¤çš„ bug
/review src/utils/  # å®¡æŸ¥ src/utils/ ç›®å½•
```

### Shell å‘½ä»¤é›†æˆ

æŸäº›å‘½ä»¤ä¼šè‡ªåŠ¨è¿è¡Œ shell å‘½ä»¤ï¼š

- `/test` â†’ è¿è¡Œ `bun test`
- `/build` â†’ è¿è¡Œ `bun run typecheck`, `bun run lint`, `bun run build`, `bun test`
- `/release` â†’ è¿è¡Œ `git log`, `bun test`, `bun run typecheck`

---

## ğŸ”§ è‡ªå®šä¹‰å‘½ä»¤

ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„å‘½ä»¤æ–‡ä»¶:

1. åœ¨ `.opencode/command/` åˆ›å»ºæ–°çš„ `.md` æ–‡ä»¶
2. æ–‡ä»¶åå³ä¸ºå‘½ä»¤åï¼ˆå¦‚ `my-cmd.md` â†’ `/my-cmd`ï¼‰
3. ä½¿ç”¨ frontmatter é…ç½®å‘½ä»¤å±æ€§

**Frontmatter é€‰é¡¹**:

```yaml
---
description: å‘½ä»¤æè¿°
agent: build | general
model: anthropic/claude-3-5-sonnet-20241022
---
```

**å¯ç”¨çš„å ä½ç¬¦**:

- `$ARGUMENTS` - æ‰€æœ‰å‚æ•°
- `$1`, `$2`, `$3` - ä½ç½®å‚æ•°
- !`command` - Shell å‘½ä»¤è¾“å‡º
- @filename - æ–‡ä»¶å¼•ç”¨

---

## ğŸ“š æ›´å¤šèµ„æº

- [OpenCode å‘½ä»¤æ–‡æ¡£](https://opencode.ai/docs/commands/)
- [é¡¹ç›® AGENTS.md](../AGENTS.md)
- [å¼€å‘æŒ‡å—](./DEVELOPMENT_GUIDE.md)

---

**æç¤º**: ä½¿ç”¨ `/help` æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤ã€‚
